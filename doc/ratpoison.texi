\input texinfo   @c -*-texinfo-*-
@c %**start of header
@setfilename ratpoison.info
@settitle ratpoison manual
@setchapternewpage odd
@c %**end of header

@dircategory X11
@direntry
* ratpoison: (ratpoison).       Say good-bye to the rodent
@end direntry

@ifinfo
This is the ratpoison user manual.

Copyright @copyright{} 2000, 2001 Shawn Betts

Permission is granted to make and distribute verbatim
copies of this manual provided the copyright notice and
this permission notice are preserved on all copies.

@ignore
Permission is granted to process this file through TeX
and print the results, provided the printed document
carries a copying permission notice identical to this
one except for the removal of this paragraph (this
paragraph not being relevant to the printed manual).

@end ignore
Permission is granted to copy and distribute modified
versions of this manual under the conditions for
verbatim copying, provided also that the sections
entitled ``Copying'' and ``GNU General Public License''
are included exactly as in the original, and provided
that the entire resulting derived work is distributed
under the terms of a permission notice identical to this
one.

Permission is granted to copy and distribute
translations of this manual into another language,
under the above conditions for modified versions,
except that this permission notice may be stated in a
translation approved by the Free Software Foundation.
@end ifinfo

@titlepage
@sp 10
@titlefont{ratpoison}
@author Shawn Betts

@page
@vskip 0pt plus 1filll
Copyright @copyright{} 2000, 2001 Shawn Betts

Permission is granted to make and distribute verbatim
copies of this manual provided the copyright notice and
this permission notice are preserved on all copies.

Permission is granted to copy and distribute modified
versions of this manual under the conditions for
verbatim copying, provided also that the sections
entitled ``Copying'' and ``GNU General Public License''
are included exactly as in the original, and provided
that the entire resulting derived work is distributed
under the terms of a permission notice identical to this
one.

Permission is granted to copy and distribute
translations of this manual into another language,
under the above conditions for modified versions,
except that this permission notice may be stated in a
translation approved by the Free Software Foundation.
@end titlepage

@node Top, About, (dir), (dir)

@ifinfo
This document explains how to use ratpoison.
@end ifinfo

@menu
* About::                       What Is Ratpoison?
* Contacting::                  How Do I Contact The Ratpoison Developers?
* Concepts::                    Window Manipulation Concepts
* General Use::                 How Does This Thing Work??
* Windows::                     Navigating The Windows
* Groups::                      Grouping Windows Together
* Frames::                      Dividing The Screen
* Multiple Monitors::           What To Do With All Your Computer Junk
* Keystrokes::                  Key Commands And Functionality
* Hooks::                       Attaching Scripts To Ratpoison Events
* The Status Bar::              Ratpoison's Input/Output Area
* Using Other Window Managers::  Return To Evil
* Other Commands::              Miscellaneous Commands
* Input::                       Typing Text Into Ratpoison
* Command Line Arguments::      ratpoison Command-Line Actions
* Startup file::                They Threatened Me...With Violence!
* Command Index::               Index

@detailmenu
 --- The Detailed Node Listing ---

Windows

* Manipulating Windows::        
* Unmanaged Windows::           
* Rudeness::                    

Frames

* Splitting Frames::            
* Resizing Frames::             
* Frame Navigation Commands::   
* Saving and Restoring Frame Sets::  
* Frame Numbering::             

Keystrokes

* Key Maps::                    
* Default Key Bindings::        

@end detailmenu
@end menu

@node About, Contacting, Top, Top
@chapter About

ratpoison is a simple Window Manager with no fat library dependencies,
no fancy graphics, no window decorations, and no rodent dependence. It
is largely modeled after GNU Screen which has done wonders in the
virtual terminal market.

All interaction with the window manager is done through
keystrokes. ratpoison has a prefix map to minimize the key clobbering
that cripples EMACS and other quality pieces of software.

ratpoison was written by Shawn Betts (@email{sabetts@@users.sourceforge.net}).

@node Contacting, Concepts, About, Top
@chapter Contacting
ratpoison is hosted on @url{sourceforge.net}. To see the latest
developments in ratpoison go to
@url{http://www.sourceforge.net/projects/ratpoison} or visit the
ratpoison webpage at @url{http://ratpoison.sourceforge.net}.

There is also a ratpoison mailing list:
@email{ratpoison-devel@@lists.sourceforge.net}. For details on subscribing
and for the list archives go to the ratpoison sourceforge.net project.

There is a #ratpoison irc channel on irc.openprojects.net.

@node Concepts, General Use, Contacting, Top
@chapter Concepts

ratpoison uses the concept of @dfn{panes} to place and size
windows. Instead of allowing windows to have arbitary shapes at
arbitary locations on the screen, the display is divided into panes,
the same way a physical window might contain several pieces of glass
seperated by wood. In ratpoison, the panes are called @dfn{frames},
and windows are placed in them, maximised. ratpoison starts with one
frame, which can be split into an arbitary number of smaller
ones. Each frame can be split in half either horizontally or
vertically. You can move among them, making different ones the
current. For more information, see @ref{Splitting Frames}.

Each frame has at most one window associated with it, which is visible
in that frame. If you select a window that is associated with a frame,
the focus will move to its associated frame, rather than moving the
window to the current frame. If you select a window that is not
associated with a frame, that window will be opened in the current
frame and resized to fit that frame.

If the window associated with a frame does not fill the frame
completely, the various gravity commands control how it is placed. 

If no window was open in that frame before the current window was
opened, the X root will be visible behind it.

Transient windows (dialog boxes, splash screens, and the like) are
handled specially. In order to understand the contents of a transient
window, the previously focused window is often required. Take a search
window, it is useful to be able to see the document you are searching
as well as the search window. For this reason transient windows appear
overtop (according to their gravity) of the previously focused window.

Every window belongs in a group. A group is simply that: a group of
windows. By default there is only one group (the @dfn{default group})
that all windows exist in. You can create new groups. When a program
creates a window it will be added to the current group. Groups are
generally used to organize windows into different classes such as work
and wasting-time-at-work.

@node General Use, Windows, Concepts, Top
@chapter General Use

When ratpoison starts you should see an empty X server. To open an x
terminal hit @kbd{C-t c}. You can now run shell commands as you would on
any terminal. Notice the terminal maximized full screen. @kbd{C-t !}
will run a single shell command and saves you the effort of opening a
terminal.

Once you have a couple X programs running, you'll want to navigate
between windows. To see what windows are being managed hit @kbd{C-t
w}. Each window has a number. You can jump to a window by hitting
@kbd{C-t} followed by the window's number. This assumes the the window's
number is one digit. You can also switch to a window by typing in part
of its name. To do this hit @kbd{C-t '}.

ratpoison allows you to cycle through the windows with @kbd{C-t n}
and @kbd{C-t p}.

And That concludes a brief introduction on how to use ratpoison. Notice
how we didn't have to drag a single window, or click a single maximize
button? Beautiful wasn't it? Felt fast? Cool? It's modern computing at
its best.

@node Windows, Groups, General Use, Top
@chapter Windows

Windows are what ratpoison manages.

@menu
* Manipulating Windows::        
* Unmanaged Windows::           
* Rudeness::                    
@end menu

@node Manipulating Windows, Unmanaged Windows, Windows, Windows
@section Manipulating Windows

The following are commands used to manipulate windows.

@deffn Command select @var{n}
This jumps you to window @var{n} where @var{n} is the window number as
shown in the Program Bar. You can do the same trick with
@command{C-@var{n}} too. To select no window, blanking the current
frame, type @samp{select -}.
@end deffn

@deffn Command select @var{window-name}
Go to a window by name. A shortcut is @kbd{C-t '}.
@end deffn

@deffn Command windows @var{fmt}
This displays the Program Bar which displays the windows you currently
have running. The number before each window name is used to jump to
that window. You can do this by typing @kbd{C-t @var{n}} where @var{n}
is the number of the window. Note that only windows with numbers from
0 to 9 can be referenced using this keystroke.  To reach windows with
numbers greater than 9, use @kbd{C-t '} and type the number at the
prompt.

After 5 seconds the Program Bar disappears.

This command is bound to @kbd{C-t w} by default.

When invoked from the command-line like this,

@example
$ ratpoison -c windows
@end example

Instead of a message bar, you will get a list of the windows printed
to stdout. This allows you to write more advanced scripts than simple
keyboard macros. This is where @var{fmt} comes into play. If
@command{windows} is given an arg it treats it as the format string as
described in @command{defwinfmt}.
@end deffn

@deffn Command title @var{title}
Rename the currently active window. This name will remain for the
duration of the window's life, unless you change it again. By default,
the @kbd{C-t A} keystroke is bound to this command.
@end deffn

@deffn Command other
This toggles between the current window and the last window. By
default, this is bound to @kbd{C-t C-t}.
@end deffn

@deffn Command prev
This jumps you to the previous window in the window list. By default,
this is bound to @kbd{C-t p}.
@end deffn

@deffn Command next
This jumps you to the next window in the window list. This one is
bound to three keystrokes, namely @kbd{C-t n}, @kbd{C-t space},
and @kbd{C-t enter}.
@end deffn

@deffn Command kill
This destroys the current window. Normally you should only need to
use @command{delete}, but just in case you need to rip the heart out of a
misbehaving window this command should do the trick. Also available as
@kbd{C-t K}.
@end deffn


@deffn Command info
Display information about the current window.
@end deffn

@deffn Command gravity @var{g}
Change the gravity of the current window. A normal window will default
to the top-left corner of the screen, but it can also be placed at the
bottom-right corner of the screen. Valid values for @var{g} are the 8
directions @samp{northwest}, @samp{north}, @samp{northeast},
@samp{east}, @samp{southeast}, @samp{south}, @samp{southwest} and
@samp{west}, clockwise from the top left corner. @samp{center} will
center the window in the frame. @var{g} and can be abbreviated to the
standard compass 1 and 2 letter abbreviations (i.e. @samp{nw},
@samp{s}, etc).

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command delete
This deletes the current window. You can access it with the @kbd{C-t k}
keystroke.
@end deffn

@deffn Command {set winname} @var{name}
@deffnx Command defwinname @var{name}
There are three resources ratpoison can get a window's name from: the
WMNAME hint, the res_name from the WMCLASS hint, or the res_class from
the WMCLASS hint. @var{name} can be @samp{title} which is what most
window managers put in the title bar, @samp{name} which is the
res_name, or @samp{class} which is the res_class.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set wingravity} @var{g}
@deffnx Command defwingravity @var{g}
Set the default gravity for normal windows. See the
@command{gravity} command.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set winliststyle} @var{setting}
@deffnx Command defwinliststyle @var{setting}
The window list can be displayed in a row or a column. @var{setting}
can be @samp{row} or @samp{column}.
@end deffn

@deffn Command {set winfmt} @var{fmt}
@deffnx Command defwinfmt @var{fmt}
Set the default window format for the @command{windows} command. By
default it is @samp{%n%s%t}. The following is a list of valid format
characters:

@table @samp
@item %n
The window number
@item %s
Window status (current window, last window, etc)
@item %t
Window Name
@item %a
Application Name
@item %c
Resource Class
@item %i
X11 Window ID
@item %l
A unique number based on when the window was last accessed. The higher
the number, the more recently it was accessed.
@item %f
The frame number the window is displayed in or a space if it is not in
a frame.
@end table

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command number @var{n} @var{target}
Set a window's number to @var{n}. If another window occupies the
requested number already, then the windows' numbers are swapped.

The second argument, @var{target}, is optional. It should be the
number of the window whose number will be changed. If @var{target} is
omitted ratpoison defaults to the current window.
@end deffn

@deffn Command {set transgravity} @var{g}
@deffnx Command deftransgravity @var{g}
Set the default alignment for transient windows. See the
@command{gravity} command.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set maxsizegravity} @var{g}
@deffnx Command defmaxsizegravity @var{g}
Set the default alignment for windows with maxsize hints. See the
@command{gravity} command.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set border} @var{n}
@deffnx Command defborder @var{n}
Set the border width for all windows.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@node Unmanaged Windows, Rudeness, Manipulating Windows, Windows
@section Unmanaged Windows

ratpoison can intentionally not manage windows. ratpoison keeps a list
of strings and if any new window's name matches a string in the list,
then it will not be picked up and managed by ratpoison.

The following are commands to manipulate this list


@deffn Command clrunmanaged
Clear the unmanaged window list.
@end deffn

@deffn Command unmanage @var{text}
Add @var{text} to the unmanaged window list. Any window whose name
matches any of the strings in the unmanaged window list will not be
handled in any way by ratpoison. This only applies to new windows (not
windows already managed by ratpoison).

When called non-interactively with no arguments, the list is returned.
@end deffn

@node Rudeness,  , Unmanaged Windows, Windows
@section Rudeness

Some programs will attempt to steal the focus without the users
permission. Not only is this a sign of a lame programmers attempt to fix
a window manager problem in the wrong place, it's just plain rude. By
default ratpoison will honour these rudeness requests, but it doesn't
have to. Use the @command{rudeness} command to deal with such programs.

@deffn Command rudeness @var{n}
The rudeness command lets you decide what windows pop-up automatically
and when. This is often useful for those deep hack sessions when you
absolutely can't be disturbed.

There are two kinds of windows: normal windows (like an xterm) and
transient windows (generally pop-up dialog boxes). When a client
program wants to display a new window it makes a requests to
ratpoison. ratpoison then decides whether to grant the request and
display the window or ignore it. A client program can also request
that one of its windows be raised. You can customize ratpoison to
either honour these requests (the default operation) or ignore them.

@var{n} is a number from 0 to 15. Each of the four bits determine
which requests ratpoison grants.

@table @asis
@item Bit 0
Tells ratpoison to grant raise requests on transient windows

@item Bit 1
Tells ratpoison to grant raise requests on normal windows

@item Bit 2
Tells ratpoison to grant display requests on new transient windows

@item Bit 3 
Tells ratpoison to grant display requests on new normal windows
@end table

For example, if you wanted only wanted to grant transient windows
raise requests and display requests you would type @samp{rudeness
5}. If a request is not granted ratpoison will tell you about the
request with a message like @samp{Raise request from window 1
(emacs)}.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@node Groups, Frames, Windows, Top
@chapter Groups
ratpoison provides functionality to group windows together. This
coupled with saving and restoring frames configurations is what most
people would call @dfn{virtual desktops} or @dfn{workspaces}. 

While ratpoison doesn't explicity provide support for such things, it
does allow you to write scripts to this end. Such a script exists in
@file{contrib/} called @file{rpws}. Consult that file for details on
seting up workspaces inside ratpoison.

Groups are more general purpose than workspaces. windows from one
group can be visible along with windows from another group. If you
switch to a different group nothing changes except the list of windows
you can cycle through. ratpoison allows the user to move a window from
one group to another, merge two groups, create new groups, and delete
existing ones.

The following is a list of of commands used for manipulating groups.

@deffn Command gnew @var{name}
Create a new group with the name @var{name}. @var{name} is
optional. This new group becomes the new group.
@end deffn

@deffn Command gnewbg @var{name}
This is the same as @command{gnew} except that the current group does
not change.
@end deffn

@deffn Command groups
Display a list of groups with a similar format to @command{windows}.
@end deffn

@deffn Command gmove @var{group}
Move the current window to @var{group}.
@end deffn

@deffn Command gnext
Go to the next group in the list.
@end deffn

@deffn Command gprev
Go to the previous group in the list.
@end deffn

@deffn Command gselect @var{group}
Select a particular group by name or number. If @var{group} is not
provided, ratpoison will interactively prompt for the group.
@end deffn

@deffn Command gmerge @var{group}
Merge @var{group} with the current group. All windows in @var{group}
will be moved to the current group. @var{group} is not deleted.
@end deffn

@deffn Command gdelete @var{group}
Delete a group. @var{group} is optional. If it is not specified
ratpoison will attempt to delete the current group. Only empty groups
can be deleted. To empty a group see @command{gmerge}.
@end deffn

@node Frames, Multiple Monitors, Groups, Top
@chapter Frames
Sometimes you may want to see two or more windows at the same
time. ratpoison allows you to split the display into frames (see
@ref{Concepts}). Each frame can then contain 1 window.

@menu
* Splitting Frames::            
* Resizing Frames::             
* Frame Navigation Commands::   
* Saving and Restoring Frame Sets::  
* Frame Numbering::             
@end menu

@node Splitting Frames, Resizing Frames, Frames, Frames
@section Splitting Frames

To split the
current frame horizontally use @kbd{C-t s}. To split the current frame
vertically use @kbd{C-t S}. If you have enough windows, you'll notice
that the new frame will find a window for itself. You can now use the
normal navigation commands to switch windows in the frame. Note,
however, that if you switch by name or number to a window that is
already in another frame, you'll switch to that frame.

Before too long, you'll probably want to switch to another frame. Use
@kbd{C-t tab} to cycle through the frames. If you want to remove a
frame use @kbd{C-t R}. ratpoison automatically adjusts the size of the
other frames to take up the free space. Unfortunately ratpoison may
not always fill it in the way you might like it to.

Finally, when you've had enough of the splitting and you just want
good ol' full screen ratpoison press @kbd{C-t Q} to remove all splits
and leave you with the current window full screen.

@deffn Command remove
Kill the current frame. This is a no-op if there is only one frame.
@end deffn

@deffn Command only
Kill all frames but the current one.
@end deffn

@deffn Command split @var{n}
@deffnx Command vsplit @var{n}
Split the current frame vertically in two. The last accessed window
not occupying a frame will be the second window.

@var{n} is either a fraction of the form @code{x/y} or a number. If it
is a fraction then the current frame is resized to that fraction of
its original size and the new frame takes up the remaining space. For
instance, @code{split 1/4} will split the current frame to a quarter
of its original size and the new frame will then be 3/4 of the size of
the original frame.

If it is a pixel, the original frame is resized to that many
pixels. If @var{n} has a minus sign before it, then the new frame will
shrink by that many pixels.
@end deffn

@deffn Command hsplit @var{n}
Split the current frame horizontally in two. The last accessed window
not occupying a frame will be the second window.

@var{n} is either a fraction of the form @code{x/y} or a number. If it
is a fraction then the current frame is resized to that fraction of
its original size and the new frame takes up the remaining space. For
instance, @code{split 1/4} will split the current frame to a quarter
of its original size and the new frame will then be 3/4 of the size of
the original frame.

If it is a pixel, the original frame is resized to that many
pixels. If @var{n} has a minus sign before it, then the new frame will
shrink by that many pixels.
@end deffn

@node Resizing Frames, Frame Navigation Commands, Splitting Frames, Frames
@section Resizing Frames
ratpoison provides a command, @command{resize}, that resizes the
current frame. It is bound to the key @kbd{C-t r} by
default. @command{resize} can be used non-interactively by providing
two arguments: the number of pixels to grow horizontally and the
number to grow vertically. For example, if you wanted to grow the
current window by 10 pixels horizontally and shrink it vertically by
50 you could enter the command:

@example
resize 10 -50
@end example

When resizing interactively, the following keys are used:

@table @kbd
@item C-p
Grow the frame vertically.
@item C-n
Shrink the frame vertically.
@item C-f
Grow the frame horizontally.
@item C-b
Shrink the frame horizontally.
@item return
Accept the new frame size.
@item C-g
Abort and restore the frame to its original size.
@end table

The increment size used to resize the frame interactively is
customized with the command @command{defresizeunit}.

@deffn Command {set resizeunit} @var{pixels}
@deffnx Command defresizeunit @var{pixels}
Set the number of pixels a frame will grow or shrink by when being
dynamically resized.
@end deffn

@deffn Command resize @var{horizontal} @var{vertical}
Resize the current frame by @var{horizontal} pixels horizontally, and
@var{vertical} pixels vertically. If no arguments are given and the
command is called interactively, ratpoison will let the user
dynamically resize the frame using @kbd{C-p} to shrink vertically,
@kbd{C-n} to grow vertically, @kbd{C-b} to shrink horizontally,
@kbd{C-f} to grow horizontally, and @kbd{s} to shrink the frame to the
size of the window (See the @command{shrink} command). When you have
resized the frame to your liking, press @kbd{Return} to finish.
@end deffn

@deffn Command shrink
If a window has resize increment hints, such as xterms, the window may
not be able to take up the whole frame. In this case, use this command
to suck the frame up to the to window, reclaiming any wasted space.
@end deffn

@node Frame Navigation Commands, Saving and Restoring Frame Sets, Resizing Frames, Frames
@section Frame Navigation Commands

Here are the commands for Navigating frames.

@deffn Command fselect @var{n}
Select a frame by number. If an argument is passed to it then attempt
to select the frame whose number is @var{n}. If not, ratpoison will
print a number at the top left corner of each frame and wait for the
user to type the number they wish to select. Currently there is no way
to select a frame whose number is greater than 9 unless the number is
passed as an argument.
@end deffn

@deffn Command curframe
Indicate which frame is the current frame.
@end deffn

@deffn Command focus
cycle through ratpoison's frames.
@end deffn

@deffn Command focusdown
Move to the frame below the current frame.
@end deffn

@deffn Command focuslast
Switch to the last focused frame.
@end deffn

@deffn Command focusleft
Move to the frame left of the current frame.
@end deffn

@deffn Command focusright
Move to the frame right of the current frame.
@end deffn

@deffn Command focusup
Move to the frame above the current frame.
@end deffn

@node Saving and Restoring Frame Sets, Frame Numbering, Frame Navigation Commands, Frames
@section Saving and Restoring Frame Sets
ratpoison provides two commands, @command{fdump} and
@command{frestore}, that allow the user to save and restore frame
configurations. Let's say, for example, you have split your desktop
into several frames with some windows in these frames and now you want
to quickly bring Emacs forward and browse some code (full-screen of
course) then return to your funky frame configuration. You could use
@command{fdump} to dump the frames, hit @kbd{C-t Q} to remove all
frames, and then select your emacs window. When you've finished with
emacs you could use @command{frestore} to restore the windows and
frames.

If a frame contained a window when you dumped the frame layout but
that window is not present when you restore the layout, the frame
holding that window will be blank.

Calling @command{fdump} and @command{frestore} and copying and pasting
the layout by hand each time is a bit cumbersome. There are some
simple bindings in @file{doc/sample.ratpoisonrc} that allow you to
save and restore frame layouts with the press of a key.

@deffn Command fdump
dump the current frame layout as text. When used non-interactively
(from the command-line), ratpoison will print the frame layout. When
used interactively, nothing happens.
@end deffn

@deffn Command frestore @var{frames}
Restore the frame layout based on the list of frames
@var{frames}. @var{frames} should be the text that was printed after
calling @code{fdump}.
@end deffn

@node Frame Numbering,  , Saving and Restoring Frame Sets, Frames
@section Frame Numbering

Frames are normally numbered starting from 0. But this can be changed
with @command{defframesels} to, for instance, include letters as well.

@example
defframesels abcdefghijklmnopqrstuvwxyz
@end example

The above code will bind letters to frames instead of numbers.

@deffn Command defframesels @var{order}
Tell ratpoison what alphanumeric character to give each frame and in
what order.
@end deffn

@node Multiple Monitors, Keystrokes, Frames, Top
@chapter Multiple Monitors
When you've finally accumulated enough computer junk, you'll find
youself attaching a second monitor to your computer. ratpoison has
functionality to help you get around your new and improved desktop
space.

The X Windowing System assigns each monitor a screen number. To switch
to another screen use the commands @command{nextscreen} and
@command{prevscreen}. Or, @command{sselect} to jump to a specified
screen. ratpoison will tell you which frame has focus by drawing the
current frame indicator in it.

Many commands operate only on the current screen. This becomes
apparent when you have 2 screens each with 1 frame. In each frame you
have an xterm. If you try to switch to the other xterm with the
command @command{other}, for instance, you'll get a message ``No other
window.'' ratpoison means there's no other window to switch to in the
current screen. If you want to switch to the other xterm you can
switch to it by name (use @command{select} or @kbd{C-t '}), by number,
or you can use @command{nextscreen}, @command{prevscreen}, and
@command{sselect}.

@deffn Command nextscreen
This jumps you to the next X11 screen. @command{nextscreen} is
used for dual-head displays and multiple monitor setups.
@end deffn

@deffn Command prevscreen
This jumps you to the previous X11 screen. @command{prevscreen} is
used for dual-head displays and multiple monitor setups.
@end deffn

@deffn Command sselect @var{n}
This jumps you to the @var{n}th X11 screen. Screen numbers start at 0.
@end deffn


@node Keystrokes, Hooks, Multiple Monitors, Top
@chapter Keystrokes

Interactive control of ratpoison is done entirely through
keystrokes. This chapter explains how keystrokes are stored and
manipulated.

ratpoison uses the Emacs style key notation. A combination of
modifiers and one non-modifier key combine to invoke an action. The
syntax is one or more modifiers seperated with dashes followed by a
dash and the non-modifier key name. For instance, holding down
control, shift, and super then pressing the spacebar would be
described as:

@example
S-C-s-space
@end example

The following is a list of modifiers ratpoison accepts:

@table @asis
@item S
Shift modifier
@item C
Control modifier
@item M
Meta modifier
@item A
Alt modifier
@item H
Hyper modifier
@item s
Super modifier
@end table

@menu
* Key Maps::                    
* Default Key Bindings::        
@end menu

@node Key Maps, Default Key Bindings, Keystrokes, Keystrokes
@section Key Maps

All keystrokes exist inside a keymap. When you press the prefix key you
are accessing the @samp{root} keymap. By default all commands reside in
the @samp{root} key map and are accessed by pressing @kbd{C-t}.

There is also a top level key map, @samp{top}. Any keystroke in this key
map can be accessed simply by pressing the key. This is where the prefix
key resides.

The following example adds a @kbd{C-x b} keybinding to switch windows,
much like @kbd{C-x b} in Emacs. See the functions below for full
descriptions.

@example
# Create the key map
newkmap ctrl-x
# Bind b to 'select' on our new key map
definekey ctrl-x b select
# Attach our keymap to the top level key map via C-x.
definekey top C-x readkey ctrl-x
@end example

The following functions control creating, editing, and deleting key maps.

@deffn Command newkmap @var{kmap}
Create a new keymap named @var{kmap}. 

@end deffn

@deffn Command delkmap @var{kmap}
Delete the keymap, @var{kmap}.
@end deffn

@deffn Command bind @var{Key} @var{command}
Bind a key to a ratpoison command. This command takes two arguments: the
key to bind and the command to run. For example, to bind @kbd{C-t R} to
restart ratpoison:

@example
bind R restart
@end example

If no command is specified then bind works exactly like @command{unbind},
unbinding the key.
@end deffn

@deffn Command unbind @var{key}
Unbind a keystroke.
@end deffn

@deffn Command definekey @var{kmap} @var{key} @var{command}
@command{definekey} works exactly like @command{bind} and
@command{unbind} except that it can bind keys on any key map (not just
@samp{root}).
@end deffn

@deffn Command undefinekey @var{kmap} @var{key}
Like @command{unbind} except that you pass it a key map in @var{kmap}.
@end deffn

@deffn Command readkey @var{kmap}
Read a key from the keyboard and execute the command associated with
it in the keymap, @var{kmap}.
@end deffn

@deffn Command link @var{key}
Call the command that @var{key} is bound to. For instance
@command{link C-t} would call the command @command{other} and switch
to the last window.
@end deffn

@node Default Key Bindings,  , Key Maps, Keystrokes
@section Default Key Bindings

ratpoison is a very simple window manager. Each window is maximized and
has no border decorations. The default keystrokes are listed in this
chapter. Not all commands are accessible by default by keys. A full list
of ratpoison commands is in the next section.

@table @kbd

@item C-t C-t
Switch to the last window.

@item C-t t
Sometimes you need to send a C-t to the current window. This keystroke
does just that.

@item C-t 0-9
Switch to the numbered window.

@item C-t -
Select no window, essentially hiding all windows in the current frame.

@item C-t A
@item C-t C-A
Rename the current window. The window's new name will prevail for the
rest of its lifetime.

@item C-t K
@item C-t C-K
Send a DestroyClient event to the current window. This will terminate
the application without question.

@item C-t n
@item C-t C-n
@item C-t Return
@item C-t C-Return
@item C-t Space
@item C-t C-Space
Go to next window.

@item C-t p
@item C-t C-p
Go to previous window.

@item C-t '
@item C-t C-'
Go to a window by name.  You will usually only need to type the first
few characters of the window name.

@item C-t a
@item C-t C-a
Display the current time of day.

@item C-t c
@item C-t C-c
Open a new X terminal.

@item C-t :
This allows you to execute a single ratpoison command.

@item C-t !
Run a shell command.

@item C-t C-!
Run a shell command through an X terminal.

@item C-t i
@item C-t C-i
Display information about the current window.

@item C-t k
@item C-t C-k
Close the current window.

@item C-t l
@item C-t C-l
Redisplay the current window. Sometimes windows don't respond correctly
to the initial maximize event and need some coaxing. This is a fancy way
of saying there are still bugs in ratpoison. @kbd{C-t l} will force the
current window to maximize.

@item C-t m
@item C-t C-m
Display the last message.

@item C-t v
@item C-t C-v
Display the version of ratpoison.

@item C-t V
@item C-t C-V
Display ratpoison's license.

@item C-t w
@item C-t C-w
Display the list of managed windows. The current window is highlighted.

@item C-t s
@item C-t C-s
Split the current window horizontally in two. The last accessed window
not occupying a frame will be the second window.

@item C-t S
@item C-t C-S
Split the current window vertically in two. The last accessed window not
occupying a frame will be the second window.

@item C-t tab
Cycle through ratpoison's frames.

@item C-t M-tab
Switch to the last focused frame.

@item C-t Q
Kill all frames but the current one.

@item C-t R
Kill the current frame. This is a no-op if there is only one frame.

@item C-t r
@item C-t C-r
Resize the current frame.

@item C-t b
@item C-t C-b
Banish the mouse to the lower right corner of the screen.

@item C-t ?
Display a help screen.

@item C-t f
@item C-t C-f
select a frame by number.

@item C-t F
Indicate which frame is the current frame.

@end table

@node Hooks, The Status Bar, Keystrokes, Top
@chapter Hooks

One of the goals of ratpoison is to allow users to create exciting
customization to fit their specific needs. Hooks allow a user to latch
scripts onto certain events.

Each hook contains a list of commands to be executed when the
appropriate event occurs in ratpoison. For example, if you want to warp
the rat to corner of the screen everytime you press a top level bound
key, you could add this to you .ratpoisonrc file:

@example
addhook key banish
@end example

That should keep the rat out of your way.

@deffn Command addhook @var{hook} @var{command}
Add a @var{command} to @var{hook}. When the hook is run, @var{command}
will be executed.

The following hooks are available:

@table @asis
@item key
Run when a top level key is pressed (by default the only top level key
is the prefix key).
@item switchwin
Run when the user switches to a different window in the current frame.
@item switchframe
Run when the user switches to another frame. This is also run when the
user switches to a different screen, since a frame switch also occurs.
@item switchgroup
Run when the user switches to a different group.
@item quit
Run when ratpoison exits.
@item restart
Run when ratpoison restarts.
@end table

@end deffn

@deffn Command remhook @var{hook} @var{command}
Remove @var{command} from the hook. See @command{addhook} for a list
of available hooks.
@end deffn


@node The Status Bar, Using Other Window Managers, Hooks, Top
@chapter The Status Bar

ratpoison presents status and output through the status bar. By default
it is located in the top right corner of the screen. 

This chapter presents commands for manipulating the status bar.

Since it is the only visible evidence that ratpoison is running (as
opposed to the invisible evidence including the lack of title bars and
your favorite desktop background) there are also copious visual
customizations available for those rainy days.

@deffn Command msgwait @var{n}
Set the bar's timeout in seconds.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command lastmsg
Display the last message.
@end deffn

@deffn Command echo @var{text}
Display @var{text} as a message.
@end deffn

@deffn Command {set inputwidth} @var{n}
@deffnx Command definputwidth @var{n}
Set the width of the input window.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set font} @var{font}
@deffnx Command deffont @var{font}
Set the font. @var{font} is a font string like @samp{9x15bold}.
@end deffn

@deffn Command {set fgcolor} @var{color}
@deffnx Command deffgcolor @var{color}
Set the foreground color for all text ratpoison displays. @var{color}
is any valid X11 color.
@end deffn

@deffn Command {set bgcolor} @var{color}
@deffnx Command defbgcolor @var{color}
Set the background color for all text ratpoison displays. @var{color}
is any valid X11 color.
@end deffn

@deffn Command {set barpadding} @var{x} @var{y}
@deffnx Command defbarpadding @var{x} @var{y}
Set the horizontal and vertical padding inside the bar.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set bargravity} @var{g}
@deffnx Command defbargravity @var{g}
Set the default alignment for the message bar. See the @command{gravity} command.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn


@deffn Command {set barborder} @var{n}
@deffnx Command defbarborder @var{n}
Set the border width for the bar window.
@end deffn


@node Using Other Window Managers, Other Commands, The Status Bar, Top
@chapter Using Other Window Managers

There are times when a program has been so badly written that it is
virtually impossible to use under ratpoison. Some authors have tailored
their programs to certain window management paradigms so aggressively
that very little can be done. Ratpoison has two commands to help you
through these difficult times: @command{tmpwm} and @command{newwm}.

These commands should be used sparingly. They were created to allow
users to understand how a poorly designed program is intended to
function so they can build a replacement or patch an existing
alternative's missing functionality.

According to independant studies, @command{tmpwm} has been used almost
exclusively to verify it's correct operation -- like a vintage sports
care: always kept in prime condition and never used. 

@command{tmpwm} and @command{newwm} are provided for boasting and
completeness.

@deffn Command tmpwm @var{WM}
Gives control over to another window manager and regains control once
it has terminated. @var{WM} is the path to the new window
manager. This command is useful when you want to temporarily take a
look at another window manager, or program under a different window
manager, but you want to come back to ratpoison when you've finished
your investigation.
@end deffn

@deffn Command newwm @var{window-manager}
This is a bad-bad command. It kills ratpoison and revives that
ugly rodent! Yuck! Avoid!
@end deffn

@node Other Commands, Input, Using Other Window Managers, Top
@chapter Other Commands

The following is a list of commands that don't fit in any existing
chapters.

@deffn Command abort
This is a pretty useless command. By default, it is bound to @kbd{C-t
g} and its purpose is to abort the current chain of keystrokes (just
like @kbd{C-g} in @samp{Emacs}).
@end deffn

@deffn Command alias @var{name} @var{command}
Allows you to name a ratpoison command something else. For
instance, if you frequently open emacs you may want to make an alias
called @samp{emacs} that loads emacs. You would do it like this:

@example
alias emacs exec emacs
@end example

An alias is treated exactly like a colon command in that you can call
it from the colon prompt, bind it to a key, and call it
non-interactively with @command{ratpoison -c}.
@end deffn

@deffn Command banish
Banish the mouse to the lower right corner of the screen.
@end deffn

@deffn Command chdir
Change the current directory for ratpoison.
@end deffn

@deffn Command colon @var{command}
Run a ratpoison command.
@end deffn

@deffn Command {set padding} @var{left} @var{top} @var{right} @var{bottom}
@deffnx Command defpadding @var{left} @var{top} @var{right} @var{bottom}
Set the padding around the edge of the screen.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command {set waitcursor} @var{n}
@deffnx Command defwaitcursor @var{n}
Set whether the rat cursor should change into a square when waiting
for a key. A non-zero number means change the cursor. Zero means don't
change the cursor.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command escape @var{key}
Set the prefix to @var{key}. For example @samp{escape C-b} sets the
prefix key to @key{C-b}.
@end deffn

@deffn Command exec @var{command}
Execute a shell command. By default, @kbd{C-t !} does this.
@end deffn

@deffn Command getenv @var{env}
Display the value of the environment variable, @var{env}.
@end deffn

@deffn Command help
Display a help screen that lists all bound keystrokes.
@end deffn

@deffn Command license
Display ratpoison's license. By default, this is bound to @kbd{C-t V}.
@end deffn

@deffn Command meta
Send a @kbd{C-t} to the current window.
@end deffn

@deffn Command quit
Quit ratpoison.
@end deffn

@deffn Command redisplay
Redisplay the current window. This is often used to fix xterms that
didn't catch ratpoison's initial maximize event.
@end deffn

@deffn Command restart
Restart ratpoison.
@end deffn

@deffn Command set @var{var} @var{value}
Set the value of a ratpoison variable. This command replaces the older
@samp{def*} variable get/set style.

Here is a list of variables that can be set:

@itemize @bullet
@item resizeunit
@item wingravity
@item transgravity
@item maxsizegravity
@item bargravity
@item font
@item padding
@item border
@item barborder
@item inputwidth
@item waitcursor
@item winfmt
@item winname
@item fgcolor
@item bgcolor
@item barpadding
@item winliststyle
@end itemize
@end deffn

@deffn Command setenv @var{env} @var{value}
Set the environment variable @var{env} to @var{value}
@end deffn

@deffn Command source @var{file}
Read a text file containing ratpoison commands.
@end deffn

@deffn Command startup_message @var{state}
Turn on or off the startup_message. This is most useful in your
.ratpoisonrc file. @var{state} can be @code{on} or @code{off}.

When called non-interactively with no arguments, the current setting is
returned.
@end deffn

@deffn Command time
Show current time in the status bar.
@end deffn

@deffn Command unalias @var{name}
Remove @var{name} from the list of defined aliases.
@end deffn

@deffn Command unsetenv @var{env}
Clear the value of the environment variable, @var{env}.
@end deffn

@deffn Command verbexec @var{command}
Verbosely exec the shell command @var{command}. Raptoison displays a
message saying command was executed.
@end deffn

@deffn Command version
Print ratpoison version.  By default, this is bound to @kbd{C-t v}.
@end deffn

@deffn Command warp @var{state}
Toggle rat warping. By default ratpoison saves the position of the
rat when leaving a window and when the user returns to the window the
rat's position is restored. This can be counter-intuitive, so you can
toggle it with this command. @var{state} can be @code{on} or @code{off}.
@end deffn

@node Input, Command Line Arguments, Other Commands, Top
@chapter Input
At various times ratpoison will prompt you for input. Ratpoison sports
a fully featured line editor. The following table lists the keystrokes
and actions:

@table @key
@item C-g
@itemx escape
abort the command requesting input.

@item C-f
@itemx right arrow
move forward a character.

@item C-b
@itemx left arrow
move backward a character.

@item M-f
move forward a word.

@item M-b
move backward a word.

@item C-a
@itemx home
move to the beginning of the line.

@item C-e
@itemx end
move to the end of the line.

@item C-d
@itemx delete
delete the character at point.

@item M-d
delete the word at point.
@item backspace
delete the character before the point.

@item M-backspace
delete the word before the point.

@item C-k
delete from the point to the end of the line.

@item C-u
delete from the point to the beginning of the line.

@item C-y
Yank the text from the X11 cut buffer.

@item C-p
@itemx up arrow
Cycle backwards through the history (This command does nothing if
ratpoison was configured with the @code{--disable-history} configure
option).

@item C-n
@itemx down arrow
Cycle forwards through the history (This command does nothing if
ratpoison was configured with the @code{--disable-history} configure
option).

@item return
submit the line of text.

@item tab
complete the text up to the point or if there are several possible
completions, cycle through them. This only works in certain
contexts. Tab completion will complete a shell command, a window name,
a group name, and colon commands in their apropriate context
(i.e. when being asked for a window name).

@item S-iso-lefttab
This is shift + tab by the way. This does the same as tab, but cycles
backwards through the completions.

@end table

All input is stored in the same history list. By default ratpoison has
a history length of 100 entries. This history is saved to the file
@file{~/.ratpoison_history} and is loaded when you start
ratpoison. This means your history sticks between sessions. This
assumes history has not been disabled on compilation.

@node Command Line Arguments, Startup file, Input, Top
@chapter Command Line Arguments
ratpoison supports command line arguments to request various actions
when invoking ratpoison.

@table @code
@item -h, --help
Display this help screen

@item -v, --version
Display the version

@item -d, --display
Specify the X display to connect to.

@item -s, --screen
Specify the screen to use. By default ratpoison runs on all
screens. You can tell it to use just one with this option.

@item -c, --command
Send ratpoison a colon-command. This allows you to control ratpoison
from the command-line. with the @option{-c} option you can script
ratpoison using any programming language that can spawn a
process. Some commands behave differently when invoked this
way. Currently the only commands that behaves differently are the
@code{windows} command and some def* commands. Instead of displaying
the window list in a message window, it is printed to stdout. The
output can then be captured and used in the ratpoison script. For
instance, this could be used to check whether a program is running and
if it is switch to its window otherwise launch it.

It should also be noted that multiple @option{-c} options can be used.

@example
$ ratpoison -c split -c split
@end example

Here ratpoison would split the current frame twice.

@item -i, --interactive
Force ratpoison to execute commands in interactive mode. This is used
in conjuction with the @option{-c} option.

@item -f, --file
Specify an alternate configuration file. @xref{Startup file}.
 
@end table

@node Startup file, Command Index, Command Line Arguments, Top
@chapter Startup file

Now you've probably read the web page, and you've no doubt dug up some
old file I forgot about. You're probably wondering, ``say, didn't he say
there was no configuration file to customize?''. Okay, ya got me. But let's
be honest here: ratpoison is so pure and fast-acting, customization is
barely worth the extra effort. In the off chance that you need to make
ratpoison your own, we now support it. 

On startup ratpoison looks for @file{~/.ratpoisonrc} and runs it through
the command parser. If @file{~/.ratpoisonrc} does not exist, ratpoison
tries @file{/etc/ratpoisonrc}. This means any command you can bind a key
to or run at the command prompt (@kbd{C-t :}) you can execute in this rc
file.

You can also use the @option{-f} option to specify another startup
file, allowing you to switch between different configurations
(@pxref{Command Line Arguments}).

@node Command Index,  , Startup file, Top
@unnumbered Command Index

@printindex fn

@bye
